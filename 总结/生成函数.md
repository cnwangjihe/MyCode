### 生成函数 ###

#### 1.普通生成函数(OGF) ####

​	一般用于求解**组合类计数问题(顺序无关)**,经典模型:

​		有$n$种物品(相同物品彼此间没有区别),第$i$种物品只能选$a_{i1},a_{i2},\cdots,a_{im_i}$个,求选$c$种物品的方案数.

​	可以简单地构造出对于每种物品的生成函数:
$$
F_i(x)=\sum_{k=1}^{m_i}x^{a_{ik}}
$$
​	将他们乘起来,$x^n$的系数即为答案.(乘法有可能是FFT,也有可能是用的比数列求和后消成比较好算的形式)

​	下面是一条比较有用的特殊式子 : 
$$
\frac{1}{(1-ax)^n}=\sum_{k=0}^\infty a^k{n\choose k}\tag{1}
$$

#### 2.指数型生成函数(EGF) ####

​	一般用于求解**排列类**计数问题**(没错,是顺序相关的)**.

​	一般形式如下 : 
$$
F(x)=\sum_{k=0}^\infty \frac{x^k}{k!}
$$
​	为什么它能够处理顺序相关的问题呢?

​	为了说明这个,我们先设如下生成函数:
$$
F(x)=\sum_i^\infty \frac{f_ix^i}{i!}\\\\
G(x)=\sum_i^\infty \frac{g_ix^i}{i!}
$$
​	将$F(x)$和$G(x)$相乘,得到$H(x)$
$$
\begin{align}
H(x)&=\sum_{i=0}^\infty x^i\sum_{j=0}^\infty \frac{f_jg_{i-j}}{j!(i-j)!}\\\\
&=\sum_{i=0}^\infty \frac{x^i}{i!}\sum_{j=0}^\infty \frac{i!}{j!(i-j)!}f_jg_{i-j}\\\\
&=\sum_{i=0}^\infty \frac{x^i}{i!}\sum_{j=0}^\infty {i\choose j}f_jg_{i-j}
\end{align}
$$
​	在两种物品中分别选$j$个和$i-j$个,如果不考虑顺序,明显只有一种(考虑OGF).如果有次序问题,则刚好是${i\choose j}$种情况.所以只要取$H(x)$的$x^i$的系数再乘上$i!$就是两种物品选$i$个(有顺序)的方案数.

​	下面是一条可能可以简化运算的式子(由泰勒展开得,$a$是常量,$x$是自变量,不考虑收敛) : 
$$
e^{ax}=\sum_{i=0}^\infty \frac{a^ix^i}{i!}\tag{2}
$$
例题:[P2012 拯救世界2](https://www.luogu.org/problemnew/show/P2012)

​首先考虑如何消掉奇数次项,根据$(2)$可得$e^{-x}$中所有奇数项的系数都乘了-1,所以可列出生成函数 : 
$$
(e^x)^4({\frac{e^x+e^{-x}}{2}})^4(\frac{e^x-e^{-x}}{2})^4
$$
暴力展开,得
$$
\frac{e^{12x}-4e^{8x}+6e^{4x}+e^{-4x}-4}{2^8}
$$
我们要求的是第n项的系数(乘回$n!$),当n不等于0时 : 
$$
\frac{12^{n}-4*8^{n}+6*4^{n}+{-4}^{n}}{2^8}
$$

#### 3.转化 ####

​	一些特殊概率题,可以考虑把所有状况分成若干个等概率的情况,看所求的占了多少种情况.

​	大多数题目仅需要求某一次项的系数,可以考虑有等比数列求和,泰勒展开等方法消去$\sum$,然后简单相乘,再展开,再求第$n$项的系数,通常可以避免过多次数的FFT.

